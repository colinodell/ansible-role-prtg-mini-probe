# Ansible Role: PRTG Mini Probe

Installs the [PRTG Mini Probe](https://github.com/PRTG/PythonMiniProbe) onto Debian-based systems.

This has only been tested with Ubuntu 18.04, but other similar distributions may also work.

## Requirements

N/A

## Role Variables

### Required Variables

```yaml
prtg_mini_probe_state: 'present'
```

Whether to install ('present') or uninstall ('absent') the mini probe

```yaml
prtg_mini_probe_host: prtg.example.com
```

The IP/DNS name of the PRTG Core Server

```yaml
prtg_mini_probe_access_key: A1F03AE0-667F-470E-879E-468BDB062053
```

Probe Access Key as defined on the PRTG Core.  Keep this secret!

### Optional Variables

Available variables are listed below, along with default values (see `defaults/main.yml`):

```yaml
prtg_mini_probe_run_as: 'root'
```

User to run the mini probe as

```yaml
prtg_mini_probe_install_version: 'master'
```

Git ref (branch or tag) of the [Mini Probe](https://github.com/PRTG/PythonMiniProbe) to install

```yaml
prtg_mini_probe_install_path: '/opt/prtg-mini-probe'
```

Where the probe should be installed to

```yaml
prtg_mini_probe_port: 443
```

Port the PRTG server is listening to (only SSL is supported)

```yaml
prtg_mini_probe_gid: '{{ ansible_date_time.iso8601_micro | to_uuid }}'
```

Probe GID (randomly auto-generated by default)

```yaml
prtg_mini_probe_name: '{{inventory_hostname}} MiniProbe'
```

Probe name

```yaml
prtg_mini_probe_interval: 60
```

Base interval for your sensors

```yaml
prtg_mini_probe_clean_memory: false
```

Whether the mini probe should flush buffered and cache memory

```yaml
prtg_mini_probe_debug_logging: false
```

Whether to enable debug logging (can create massive log files)

```yaml
prtg_mini_probe_subprocess_count: 10
```

How many subprocesses should be spawned for scanning

## Dependencies

N/A

## Example Playbook

## License

MIT / BSD

## Author Information

This role was created in 2019 by [Colin O'Dell](https://www.colinodell.com).

The structure of this repository was inspired heavily by [Jeff Geerling](https://www.jeffgeerling.com/).
